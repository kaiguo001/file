import{_ as y,m as w,o as c,c as r,q as L,s as d,a as f,F as h,d as _,t as S,p as I,i as b,u as v,v as g,r as D,b as M}from"./index-f33278ac.js";const x={name:"nbtimeScale",props:{dateTime:{type:Array},loadBoolean:{type:Boolean}},data(){return{timeList:["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"," 23:00","24:00"],timeSlotArrList:[],timeInfoXLine:0,timeInfoX:0,timeInfoY:0,timeInfo:"",reduceX:0,nbtimeScaleWidthNum:10,nbtimeScaleLeft:0}},watch:{dateTime(){let e=[];this.dateTime.forEach(t=>{e.push([t.begintime.slice(11,19),t.endtime.slice(11,19)])}),this.timeSlotArrList=[],e.forEach((t,l)=>{let m=this.computeTime(t),i=this.dateTime[l];this.timeSlotArrList.push([m,i])})}},methods:{getLeft(){let e=this.offsetLeft(this.$refs.lineDom);this.reduceX=e},offsetLeft(e){let t=e.offsetLeft,l=e.offsetParent;for(;l!=null;)t+=l.offsetLeft,l=l.offsetParent;return t},getMouseXY(e){let t=e.clientX-this.reduceX;this.timeInfoX=t-14+"px",this.timeInfoXLine=t+11+"px";const l=this.$refs.lineDom.clientWidth;let m=t/l,n=60*60*24*m,a=Math.floor(n/(60*60));a<10&&(a="0"+a);let s=n%(60*60),o=Math.floor(s/60);o<10&&(o="0"+o);let u=Math.floor(s%60);u<10&&(u="0"+u);let T=a+":"+o+":"+u;this.timeInfo=T},computeTime(e){let t=86400,l=(e[0].slice(0,2)-0)*60*60+(e[0].slice(3,5)-0)*60+(e[0].slice(6,8)-0),m=(e[1].slice(0,2)-0)*60*60+(e[1].slice(3,5)-0)*60+(e[1].slice(6,8)-0),i=l/t*100,a=m/t*100-i;return[i,a]},videoPlay(e,t){t.begintime=t.begintime.slice(0,11)+this.timeInfo,this.$emit("videoPlaySTF",t)},handerPictu(e){e.wheelDelta>0?this.nbtimeScaleWidthNum++:e.wheelDelta<0&&this.nbtimeScaleWidthNum>10&&this.nbtimeScaleWidthNum--}}},B=e=>(I("data-v-9e6c7cf2"),e=e(),b(),e),X=B(()=>f("div",{class:"newLine"},null,-1)),P=["onClick"],Y={class:"time"};function k(e,t,l,m,i,n){const a=w("loading");return c(),r("div",{class:"nbtimeScaleBox",onMousewheel:t[2]||(t[2]=(...s)=>n.handerPictu&&n.handerPictu(...s))},[L((c(),r("div",{class:"nbtimeScale",onMousemove:t[1]||(t[1]=s=>n.getLeft()),style:d([{width:i.nbtimeScaleWidthNum*10+"%"},{left:i.nbtimeScaleLeft+"px"}])},[f("div",{class:"timeInfoLine",style:d({left:i.timeInfoXLine})},null,4),f("div",{class:"line",onMousemove:t[0]||(t[0]=s=>n.getMouseXY(s)),ref:"lineDom"},[X,(c(!0),r(h,null,_(i.timeList,(s,o)=>(c(),r("div",{class:"lineShu",key:o+"a",style:d({left:100/24*o+"%"})},null,4))),128)),(c(!0),r(h,null,_(i.timeSlotArrList,(s,o)=>(c(),r("div",{key:o+"b",class:"box",style:d({left:s[0][0]+"%",width:s[0][1]+"%"}),onClick:p=>n.videoPlay(p,s[1])},null,12,P))),128))],544),f("div",Y,[(c(!0),r(h,null,_(i.timeList,(s,o)=>(c(),r("div",{class:"timeShu",key:o+"c",style:d({left:100/24*o+"%"})},S(s),5))),128))]),f("div",{class:"timeInfoBox",style:d({left:i.timeInfoX})},S(i.timeInfo),5)],36)),[[a,l.loadBoolean]])],32)}const N=y(x,[["render",k],["__scopeId","data-v-9e6c7cf2"]]);const F={name:"timeScaleShow",components:{timeScale:N},data(){return{timeScaleFTSDate:[],loadBoolean:!0}},mounted(){this.searchGetTime()},methods:{async searchGetTime(){let e=[v().format("YYYY-MM-DD")+" 00:00:00",v().format("YYYY-MM-DD HH:mm:ss")],t={alertFlag:0,deviceChannel:"8888883271_1",beginTime:e[0],endTime:e[1],streamType:0,token:"string"},l=await g(t);this.loadBoolean=!1,this.timeScaleFTSDate=l.data}}},W={class:"timeScale"};function A(e,t,l,m,i,n){const a=D("timeScale");return c(),r("div",W,[M(a,{dateTime:i.timeScaleFTSDate,loadBoolean:i.loadBoolean},null,8,["dateTime","loadBoolean"])])}const H=y(F,[["render",A],["__scopeId","data-v-ef3084a2"]]);export{H as default};
