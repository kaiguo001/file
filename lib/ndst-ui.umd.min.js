(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["ndst-ui"]=e():t["ndst-ui"]=e()})("undefined"!==typeof self?self:this,(function(){return function(){"use strict";var t={};!function(){t.d=function(e,i){for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})}}(),function(){t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){t.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){t.p=""}();var e={};if(t.r(e),t.d(e,{default:function(){return y}}),"undefined"!==typeof window){var i=window.document.currentScript,s=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(t.p=s[1])}var o=function(){var t=this,e=t._self._c;return e("button",{staticClass:"myBtn"},[t._v("1232")])},c=[],n={name:"ndButton"},h=n;function a(t,e,i,s,o,c,n,h){var a,r="function"===typeof t?t.options:t;if(e&&(r.render=e,r.staticRenderFns=i,r._compiled=!0),s&&(r.functional=!0),c&&(r._scopeId="data-v-"+c),n?(a=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},r._ssrRegister=a):o&&(a=h?function(){o.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:o),a)if(r.functional){r._injectStyles=a;var l=r.render;r.render=function(t,e){return a.call(e),l(t,e)}}else{var d=r.beforeCreate;r.beforeCreate=d?[].concat(d,a):[a]}return{exports:t,options:r}}var r=a(h,o,c,!1,null,"667575f6",null),l=r.exports,d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"verify-container",style:{width:`${t.width}px`}},[e("div",{staticClass:"refresh",on:{click:t.reset}},[e("svg",{staticClass:"icon",attrs:{t:"1637315258145",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2420",width:"20",height:"20"}},[e("path",{attrs:{d:"M960 416V192l-73.056 73.056a447.712 447.712 0 0 0-373.6-201.088C265.92 63.968 65.312 264.544 65.312 512S265.92 960.032 513.344 960.032a448.064 448.064 0 0 0 415.232-279.488 38.368 38.368 0 1 0-71.136-28.896 371.36 371.36 0 0 1-344.096 231.584C308.32 883.232 142.112 717.024 142.112 512S308.32 140.768 513.344 140.768c132.448 0 251.936 70.08 318.016 179.84L736 416h224z","p-id":"2421",fill:"#8a8a8a"}})])]),e("div",{staticClass:"pic"},[e("canvas",{ref:"canvas_img",staticClass:"canvas_img",attrs:{width:t.width,height:t.height}}),e("canvas",{ref:"canvas_block",staticClass:"canvas_block",style:{left:t.blockLeft+"px"},attrs:{width:t.width,height:t.height}})]),e("div",{staticClass:"slider",style:{height:t.blockW+"px"}},[t.showText?e("div",{staticClass:"tip"},[t._v("向右滑动完成验证")]):t._e(),e("div",{class:["bar",t.slideState],style:{width:t.sliderLeft+"px"}}),e("div",{class:["slider-icon",t.slideState],style:{left:t.sliderLeft+"px"},on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[t._v(" "+t._s({active:">",fail:"x",success:"√"}[t.slideState]||">")+" ")])])])},f=[],u={name:"ndVerifycode",props:{width:{type:Number,default:320},height:{type:Number,default:160},blockW:{type:Number,default:40},accuracy:{type:Number,default:1},images:{type:Array,default:()=>["./verifyImg1.png","./verifyImg2.png","./verifyImg3.png"]}},data(){return{bgImg:null,ctxImg:null,ctxBlock:null,blockRect:{w:this.blockW+2*this.blockW/4,r:this.blockW/4,x:0,y:0},blockLeft:0,startX:0,EndX:0,sliderLeft:0,slideState:"",timeIns:null,showText:!0,isMouseDown:!1}},mounted(){this.init()},beforeDestroy(){clearTimeout(this.timeIns)},methods:{init(){this.ctxImg=this.$refs["canvas_img"].getContext("2d"),this.ctxBlock=this.$refs["canvas_block"].getContext("2d"),this.getImg()},getImg(){const t=document.createElement("img"),e=this.images.length,i=Math.floor(Math.random()*e);t.crossOrigin="Anonymous",t.src=this.images[i],this.bgImg=t,t.onload=()=>{this.ctxImg.drawImage(this.bgImg,0,0,this.width,this.height),this.getBlockPostion(),this.ctxBlock.drawImage(this.bgImg,0,0,this.width,this.height);const t=this.blockRect.y-2*this.blockRect.r,e=this.ctxBlock.getImageData(this.blockRect.x,t,this.blockRect.w,this.blockRect.w+1);this.$refs["canvas_block"].width=this.blockRect.w,this.ctxBlock.putImageData(e,0,t)}},getBlockPostion(){const t=Math.floor(this.width/2+Math.random()*(this.width/2-this.blockRect.w)),e=Math.floor(30+Math.random()*(this.height-this.blockRect.w-30));this.blockRect.x=t,this.blockRect.y=e,this.draw(this.ctxImg,"fill"),this.draw(this.ctxBlock,"clip")},draw(t,e){const{r:i,x:s,y:o}=this.blockRect,c=this.blockW;t.beginPath(),t.moveTo(s,o),t.arc(s+c/2,o-i+2,i,.72*Math.PI,2.26*Math.PI),t.lineTo(s+c,o),t.arc(s+c+i-2,o+c/2,i,1.21*Math.PI,2.78*Math.PI),t.lineTo(s+c,o+c),t.lineTo(s,o+c),t.arc(s+i-2,o+c/2,i+.4,2.76*Math.PI,1.24*Math.PI,!0),t.lineTo(s,o),t.closePath(),t.fillStyle="rgba(225, 225, 225, 0.8)",t.strokeStyle="rgba(225, 225, 225, 0.8)",t.lineWidth=2,t.stroke(),t[e]()},touchStart(t){this.startX=t.changedTouches[0].pageX,this.showText=!1},touchMove(t){this.endX=t.changedTouches[0].pageX-this.startX,this.endX<0||this.endX>this.width-this.blockW||(this.sliderLeft=this.endX,this.blockLeft=this.sliderLeft/(this.width-this.blockW)*(this.width-this.blockRect.w),this.slideState="active")},touchEnd(){const t=this.verify();t?(this.slideState="success",this.$emit("verifySuccess")):(this.slideState="fail",this.timeIns=setTimeout((()=>{this.reset()}),1e3))},verify(){return Math.abs(this.blockLeft-this.blockRect.x)<=this.accuracy},reset(){this.showText=!0,this.slideState="",this.sliderLeft=0,this.blockLeft=0,this.$refs["canvas_block"].width=this.width,this.ctxImg.clearRect(0,0,this.width,this.height),this.ctxBlock.clearRect(0,0,this.width,this.height),this.getImg()}}},g=u,m=a(g,d,f,!1,null,"bfa3fd38",null),p=m.exports;const b=[l,p],v=t=>{b.forEach((e=>{t.component(e.name,e)}))};var w=v,y=w;return e}()}));
//# sourceMappingURL=ndst-ui.umd.min.js.map